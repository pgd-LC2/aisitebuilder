@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  }

  /* 覆盖 Chrome 自动填充的默认样式，保持输入框背景一致 */
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  input:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 1000px rgba(255, 255, 255, 0.5) inset !important;
    box-shadow: 0 0 0 1000px rgba(255, 255, 255, 0.5) inset !important;
    background-color: transparent !important;
    -webkit-text-fill-color: #111827 !important; /* text-gray-900 */
    transition: background-color 9999s ease-out 0s;
  }
}

@layer utilities {
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
  }

  @keyframes bubbleOut {
    0% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.5;
      transform: scale(1.1);
    }
    100% {
      opacity: 0;
      transform: scale(0.3);
    }
  }

  @keyframes bubbleIn {
    0% {
      opacity: 0;
      transform: scale(0.8);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-bubble-out {
    animation: bubbleOut 0.6s ease-out forwards;
  }

  .animate-bubble-in {
    animation: bubbleIn 0.3s ease-out;
  }

  @keyframes huarongdaoDisappear {
    0% {
      opacity: 1;
      transform: scale(1) rotate(0deg);
    }
    30% {
      opacity: 0.8;
      transform: scale(1.05) rotate(1deg);
    }
    100% {
      opacity: 0;
      transform: scale(0.8) rotate(-2deg) translateY(-10px);
    }
  }

  @keyframes huarongdaoSlide {
    0% {
      transform: var(--huarongdao-start-transform, translate(0, 0));
    }
    40% {
      transform: var(--huarongdao-mid-transform, translate(0, 0));
    }
    100% {
      transform: translate(0, 0);
    }
  }

  .animate-huarongdao-disappear {
    animation: huarongdaoDisappear 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  .animate-huarongdao-slide {
    animation: huarongdaoSlide 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
  }

  .huarongdao-item {
    will-change: transform;
  }

  /* 火焰燃烧消散动画 */
  @keyframes fireBurnDisappear {
    0% {
      opacity: 1;
      transform: scale(1);
      filter: brightness(1) saturate(1);
    }
    20% {
      opacity: 1;
      transform: scale(1.02);
      filter: brightness(1.2) saturate(1.3);
    }
    40% {
      opacity: 0.9;
      transform: scale(1.01);
      filter: brightness(1.5) saturate(1.5) sepia(0.3);
    }
    60% {
      opacity: 0.6;
      transform: scale(0.98);
      filter: brightness(1.3) saturate(1.2) sepia(0.5);
    }
    80% {
      opacity: 0.3;
      transform: scale(0.95);
      filter: brightness(0.8) saturate(0.5) sepia(0.7);
    }
    100% {
      opacity: 0;
      transform: scale(0.9);
      filter: brightness(0.3) saturate(0) sepia(1);
    }
  }

  .animate-fire-burn-disappear {
    animation: fireBurnDisappear 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    pointer-events: none;
  }

  /* 搜索按钮光带扫过效果 */
  @keyframes searchButtonSweep {
    0% {
      transform: translateX(-100%) skewX(-15deg);
    }
    100% {
      transform: translateX(200%) skewX(-15deg);
    }
  }

  .search-button-sweep::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.4),
      transparent
    );
    transform: translateX(-100%) skewX(-15deg);
  }

  .search-button-sweep.is-searching::after {
    animation: searchButtonSweep 0.6s ease-out;
  }

  /* 卡片受热抖动效果 */
  @keyframes heatShake {
    0%, 100% {
      transform: translateX(0);
    }
    10% {
      transform: translateX(-2px) rotate(-0.5deg);
    }
    20% {
      transform: translateX(2px) rotate(0.5deg);
    }
    30% {
      transform: translateX(-1px) rotate(-0.3deg);
    }
    40% {
      transform: translateX(1px) rotate(0.3deg);
    }
    50% {
      transform: translateX(-1px);
    }
    60% {
      transform: translateX(1px);
    }
    70% {
      transform: translateX(-0.5px);
    }
    80% {
      transform: translateX(0.5px);
    }
    90% {
      transform: translateX(0);
    }
  }

  .animate-heat-shake {
    animation: heatShake 0.3s ease-in-out;
  }

  /* 非线性补位动画 */
  @keyframes elasticSlide {
    0% {
      transform: var(--slide-from, translate(0, 0));
    }
    60% {
      transform: translate(
        calc(var(--slide-overshoot-x, 0) * -0.1),
        calc(var(--slide-overshoot-y, 0) * -0.1)
      );
    }
    80% {
      transform: translate(
        calc(var(--slide-overshoot-x, 0) * 0.05),
        calc(var(--slide-overshoot-y, 0) * 0.05)
      );
    }
    100% {
      transform: translate(0, 0);
    }
  }

  .animate-elastic-slide {
    animation: elasticSlide 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  /* 漂浮背景动画 - 连续单向漂移 */
  @keyframes asb-drift {
    0% {
      transform: 
        translate(0px, 0px) 
        scale(var(--drift-scale-start, 1)) 
        rotate(var(--drift-rotate-start, 0deg));
    }
    100% {
      transform: 
        translate(var(--drift-x, 60px), var(--drift-y, -40px)) 
        scale(var(--drift-scale-end, 1.02)) 
        rotate(var(--drift-rotate-end, 5deg));
    }
  }

  /* 呼吸动画 - 平滑的透明度变化 */
  @keyframes asb-breathe {
    0%, 100% {
      opacity: var(--breathe-opacity-min, 0.3);
      filter: blur(var(--blur-min, 24px));
    }
    50% {
      opacity: var(--breathe-opacity-max, 0.5);
      filter: blur(var(--blur-max, 28px));
    }
  }

  .asb-floating-blob {
    will-change: transform, opacity, filter;
    animation: 
      asb-drift var(--drift-duration, 30s) linear infinite alternate,
      asb-breathe var(--breathe-duration, 8s) ease-in-out infinite;
  }

  /* 尊重用户的减少动画偏好 */
  @media (prefers-reduced-motion: reduce) {
    .asb-floating-blob {
      animation: none;
    }
  }

  /* 不定进度条动画 - 蓝色胶囊型 */
  @keyframes progressIndeterminate {
    0% {
      transform: translateX(-100%);
    }
    50% {
      transform: translateX(150%);
    }
    100% {
      transform: translateX(-100%);
    }
  }

  .animate-progress-indeterminate {
    animation: progressIndeterminate 2s ease-in-out infinite;
  }
}
